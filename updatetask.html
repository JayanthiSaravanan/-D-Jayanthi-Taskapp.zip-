<!doctype html>
<html>

<head>
  <title>Task App</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- CSS only -->
</head>



<body>
  <div class="container">
    <h3> Update Task</h3>

    <form onsubmit="updateTask()">
      <div class="row">
        <div class="col-25">
          <label for="id">Task ID:</label>
        </div>
        <div class="col-75">
          <input type="number" id="id" name="id" placeholder="Enter Task Id" required autofocus><br /><br />
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="name">Task Name:</label>
        </div>
        <div class="col-75">
          <input type="text" id="name" name="name" placeholder="Enter Task Name"><br /><br />
        </div>
      </div>



      <div class="row">
        <div class="col-25">
          <label for="status">Status:</label>
        </div>
        <div class="col-75">
          <select id="status" name="status">
            <option value="P">Pending</option>
            <option value="I">In Progress</option>
            <option value="C">Completed</option>
          </select>
        </div><br /><br />
      </div>

      <div class="row">
        <div class="col-25">
          <label for="cname">Created By:</label>
        </div>
        <div class="col-75">
          <select id="cname" name="cname">
            <option value="jayanthi">Jayanthi</option>
            <option value="sanjay">Sanjay</option>
            <option value="nithin">Nithin</option>
          </select><br /> <br />
        </div>
      </div>

      <div class="row">
        <div class="col-25">
          <label for="date">Created Date:</label>
        </div>
        <div class="col-75">
          <input type="date" id="date" name="date" placeholder="Enter Date"><br /><br /><br />
        </div>
      </div>

      <div class="row">
        <div class="col-4">
          <button type="submit" class="btn btn-success">Submit</button>
          <button type="reset" class="btn btn-danger">Reset</button>
        </div>
      </div>
  </div>
  </div>
  </form>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

  <link rel="stylesheet" href="css/style.css">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
    crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"
    integrity="sha512-xIPqqrfvUAc/Cspuj7Bq0UtHNo/5qkdyngx6Vwt+tmbvTLDszzXM0G6c91LXmGrRx8KEPulT+AfOOez+TeVylg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>


  <script>
    function updateTask() {
      event.preventDefault();

      let id = document.querySelector("#id").value;
      let name = document.querySelector("#name").value;
      let status = document.querySelector("#status").value;
      let cname = document.querySelector("#cname").value;
      // let date = document.querySelector("#date").value;
      let createdDate = new Date().toJSON();


      // alert('result:' + id);
      // alert('result:' + name);
      // alert('result:' + cname);
      // alert('result:' + status);
      // alert('result:' + date);
      if (id == null || id.trim() == "") {
        alert("Enter Id");
        return false;
      }

      else if (name == null || name.trim() == "") {
        alert("Enter task name");
        return false;
      }
      else if (cname == null || cname.trim() == "") {
        alert("Enter created by");
        return false;
      }

      alert("successfully updated task");
      
      const userobj = {
        id: id,
        name: name,
        created_by: cname,
        status: status,
        created_date: createdDate
      };
      console.log(userobj);
      const url = "http://localhost:3000/tasks/" + id;

      axios.put(url, userobj).then(res => {

        console.log(res.data);
      });
    }

  </script>
  </div>
</body>

</html>
